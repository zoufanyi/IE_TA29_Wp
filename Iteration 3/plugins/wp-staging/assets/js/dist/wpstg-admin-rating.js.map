{"version":3,"file":"wpstg-admin-rating.js","sources":["../src/wpstg-admin-rating.js"],"sourcesContent":["let wpstgTimesWaited = 0;\n\n/*\nLet's wait for jQuery to be available to show the rating.\nWe need it to dispatch AJAX requests.\n */\nvar wpstgWaitForJQuery = setInterval(function() {\n  if (wpstgTimesWaited > 100) {\n    // Give up waiting.\n    clearInterval(wpstgWaitForJQuery);\n  }\n  if (typeof jQuery != 'undefined') {\n    wpstgRegisterRatingEvents();\n\n    clearInterval(wpstgWaitForJQuery);\n  }\n  wpstgTimesWaited = wpstgTimesWaited + 1;\n}, 100);\n\nfunction wpstgRegisterRatingEvents() {\n  // Show the rating once jQuery is loaded.\n  jQuery('.wpstg_fivestar').show();\n\n  /**\n     * Dispatch the request to hide the video after user clicks to rate the plugin.\n     */\n  jQuery(document).on('click', '#wpstg_clicked_deserved_it', function(e) {\n    jQuery.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      data: {action: 'wpstg_hide_rating'},\n      error: function(xhr, textStatus, errorThrown) {\n        console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n        console.log(textStatus);\n\n        alert(\n            'Unknown error. Please get in contact with us to solve it support@wp-staging.com',\n        );\n      },\n      success: function(data) {\n        jQuery('.wpstg_fivestar').slideUp('fast');\n        return true;\n      },\n      statusCode: {\n        404: function() {\n          alert('Something went wrong; can\\'t find ajax request URL! Please get in contact with us to solve it support@wp-staging.com');\n        },\n        500: function() {\n          alert('Something went wrong; internal server error while processing the request! Please get in contact with us to solve it support@wp-staging.com');\n        },\n      },\n    });\n  });\n\n  jQuery('.wpstg_hide_rating').on('click', function(e) {\n    e.preventDefault();\n\n    jQuery.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      data: {action: 'wpstg_hide_rating'},\n      error: function(xhr, textStatus, errorThrown) {\n        console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n        console.log(textStatus);\n\n        alert(\n            'Unknown error. Please get in contact with us to solve it support@wp-staging.com',\n        );\n      },\n      success: function(data) {\n        jQuery('.wpstg_fivestar').slideUp('fast');\n        return true;\n      },\n      statusCode: {\n        404: function() {\n          alert('Something went wrong; can\\'t find ajax request URL! Please get in contact with us to solve it support@wp-staging.com');\n        },\n        500: function() {\n          alert('Something went wrong; internal server error while processing the request! Please get in contact with us to solve it support@wp-staging.com');\n        },\n      },\n    });\n  });\n\n  jQuery('.wpstg_rate_later').on('click', function(e) {\n    e.preventDefault();\n\n    jQuery.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      data: {action: 'wpstg_hide_later'},\n      error: function(xhr, textStatus, errorThrown) {\n        console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n        console.log(textStatus);\n\n        alert(\n            'Unknown error. Please get in contact with us to solve it support@wp-staging.com',\n        );\n      },\n      success: function(data) {\n        jQuery('.wpstg_fivestar').slideUp('fast');\n        return true;\n      },\n      statusCode: {\n        404: function() {\n          alert('Something went wrong; can\\'t find ajax request URL! Please get in contact with us to solve it support@wp-staging.com');\n        },\n        500: function() {\n          alert('Something went wrong; internal server error while processing the request! Please get in contact with us to solve it support@wp-staging.com');\n        },\n      },\n    });\n  });\n}\n\ndocument.styleSheets[0].insertRule('@media only screen and (max-width:600px){.wpstg-welcome-box{display:block !important}.wpstg-welcome-video-container{width:100% !important;height:auto !important}.wpstg-welcome-text{padding-left:8px !important}}', '');\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  let player;\n  let accepted = wpstgYouTubeConfig.accepted;\n  const playerPlaceholder = document.getElementById('welcomeNoticeFree');\n  playerPlaceholder.addEventListener('click', function() {\n    if (!accepted) {\n      const message = wpstgYouTubeConfig.message + '\\n \\n' + wpstgYouTubeConfig.regards;\n      const conf = confirm(message);\n      if (conf) {\n        accepted = true;\n        wpstgFetchVideo();\n      }\n    }\n  });\n});\n\nfunction wpstgFetchVideo() {\n  const tag = document.createElement('script');\n\n  tag.src = 'https://www.youtube.com/iframe_api';\n  const firstScriptTag = document.getElementsByTagName('script')[0];\n  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n}\n\nfunction onYouTubeIframeAPIReady() {\n  player = new YT.Player('welcomeNoticeFree', {\n    height: '225',\n    width: '400',\n    videoId: 'il5y6kPprR8',\n    playerVars: {\n      rel: 0,\n      showinfo: 0,\n      ecver: 2,\n    },\n    events: {\n      'onReady': onPlayerReady,\n    },\n  });\n}\n\nfunction onPlayerReady(event) {\n  event.target.playVideo();\n}\n"],"names":["wpstgTimesWaited","wpstgWaitForJQuery","setInterval","clearInterval","jQuery","wpstgRegisterRatingEvents","show","document","on","e","ajax","url","ajaxurl","type","data","action","error","xhr","textStatus","errorThrown","console","log","status","statusText","alert","success","slideUp","statusCode","preventDefault","styleSheets","insertRule","addEventListener","accepted","wpstgYouTubeConfig","playerPlaceholder","getElementById","message","regards","conf","confirm","wpstgFetchVideo","tag","createElement","src","firstScriptTag","getElementsByTagName","parentNode","insertBefore"],"mappings":"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"}